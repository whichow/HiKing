# 突发事件实现细则

## 一、约会冲突类事件实现

### 1. 正在约会时收到其他约会邀请
- 触发条件：当前正在约会且好感度>30
- 触发概率：15%
- 选项影响：
  - 拒绝新邀请：当前+5，邀请方-3
  - 中断当前约会：当前-10，邀请方+8
  - 协调时间：双方+2，获得"调解者"属性点

### 2. 已约会被要求改期
- 触发条件：预约约会后24小时内
- 触发概率：10%
- 选项影响：
  - 同意改期：好感度+3，获得"体贴"属性点
  - 拒绝改期：好感度-5
  - 建议替代方案：好感度+5，获得"智慧"属性点

### 3. 多位女主同时出现
- 触发条件：好感度均>50
- 触发概率：5%
- 影响范围：2-3位女主角色
- 选项影响：
  - 果断选择：选中+10，其他-8
  - 平衡处理：各-2，获得"交际"属性点
  - 暂时回避：各-5，保持关系稳定

## 二、紧急求助类事件实现

### 1. 身体不适求助
- 触发条件：好感度>40
- 触发概率：10%
- 选项影响：
  - 立即前往：好感度+15，消耗3小时
  - 远程关心：好感度+5
  - 推荐就医：好感度+3

### 2. 遇到麻烦求解围
- 触发条件：好感度>20
- 触发概率：12%
- 选项影响：
  - 亲自帮助：好感度+12，消耗1-2小时
  - 提供建议：好感度+5
  - 介绍他人：好感度+3

### 3. 情感安慰
- 触发条件：好感度>35
- 触发概率：15%
- 选项影响：
  - 面对面倾听：好感度+15，消耗2小时
  - 电话安慰：好感度+8
  - 发送鼓励消息：好感度+3

## 三、意外相遇类事件实现

### 1. 商场偶遇
- 触发条件：周末，好感度>15
- 触发概率：20%
- 选项影响：
  - 主动打招呼：好感度+5
  - 装作没看见：好感度-3
  - 邀请同行：好感度+8，触发临时约会

### 2. 餐厅/电影院相遇
- 触发条件：休闲时间段，好感度>20
- 触发概率：15%
- 选项影响：
  - 热情招呼：好感度+6
  - 简单问候：好感度+3
  - 邀请加入：好感度+10，可能触发多人剧情

## 四、系统平衡机制

### 1. 频率控制
- 全局冷却：每次触发后1小时内不再触发
- 角色冷却：同一角色24小时内最多触发1次
- 类型冷却：同类型事件6小时内不重复

### 2. 概率调整
- 基础概率：5%-20%
- 调整因素：
  - 好感度每超过10点增加2%概率
  - 重要剧情期间降低50%
  - 节假日提升30%
  - 特殊道具可提升触发概率

### 3. 资源消耗
- 体力消耗：
  - 紧急求助：30-50点
  - 意外相遇：10-20点
  - 约会冲突：20-30点
- 时间消耗：
  - 快速处理：30分钟
  - 一般处理：1-2小时
  - 深入处理：2-4小时

### 4. 奖励机制
- 属性点数：
  - 完美处理：3-5点
  - 一般处理：1-2点
- 特殊道具：
  - 高难度处理可获得稀有道具
  - 连续成功处理可获得成就奖励

## 五、特殊情况处理

### 1. 多重触发
- 优先级排序：紧急求助 > 约会冲突 > 意外相遇
- 同时触发时保留优先级最高的事件
- 其他事件进入队列，延迟触发

### 2. 剧情冲突
- 主线剧情期间完全禁用突发事件系统
- 支线剧情期间完全禁用突发事件系统
- 剧情结束后系统自动重新启用
- 剧情相关场景自动锁定突发事件
- 特殊剧情场景将采用预设剧情事件，不触发随机突发事件
- 特殊剧情期间可能触发专属突发事件
- 重要节点可锁定突发事件系统

### 3. 失败处理
- 处理失败后24小时内降低该类事件触发概率
- 提供补偿机制（如：道歉礼物、特殊对话等）
- 设置挽回剧情触发条件